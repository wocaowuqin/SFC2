è¿™æ˜¯ä¸ºæ‚¨ç”Ÿæˆçš„é’ˆå¯¹ `HIRL-MSFC-CE (1)` æ¨¡å—çš„ä¸“ç”¨ `README.md` æ–‡ä»¶ã€‚

è¯¥æ–‡æ¡£ä¸“æ³¨äºŽæ··åˆåˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHIRLï¼‰çš„å®žçŽ°ç»†èŠ‚ã€æ–‡ä»¶ç»“æž„å’Œè¿è¡Œæ–¹å¼ï¼Œå‰”é™¤äº†æ— å…³çš„ Mininet/Ryu éƒ¨åˆ†ï¼Œé€‚åˆä½œä¸ºè¯¥å­é¡¹ç›®çš„ç‹¬ç«‹è¯´æ˜Žæ–‡æ¡£ã€‚

-----

# HIRL-MSFC-CE: Hybrid Hierarchical Reinforcement Learning for Multicast SFC Mapping

æœ¬é¡¹ç›®å®žçŽ°äº†ä¸€ç§åŸºäºŽ **æ··åˆåˆ†å±‚å¼ºåŒ–å­¦ä¹  (Hybrid Hierarchical Reinforcement Learning, HIRL)** çš„å¤šæ’­æœåŠ¡åŠŸèƒ½é“¾ (Multicast SFC) æ˜ å°„ç®—æ³•ã€‚

è¯¥æ¡†æž¶ç»“åˆäº† **æ¨¡ä»¿å­¦ä¹  (Imitation Learning/DAgger)** å’Œ **åˆ†å±‚å¼ºåŒ–å­¦ä¹  (Hierarchical RL/H-DQN)**ï¼Œæ—¨åœ¨è§£å†³ NFV çŽ¯å¢ƒä¸‹å¤šæ’­æ ‘æž„å»ºä¸Ž VNF éƒ¨ç½²çš„è”åˆä¼˜åŒ–é—®é¢˜ã€‚é€šè¿‡å¼•å…¥ MSFC-CE å¯å‘å¼ç®—æ³•ä½œä¸ºâ€œä¸“å®¶ï¼ˆExpertï¼‰â€ï¼ŒåŠ é€Ÿäº†æ¨¡åž‹çš„è®­ç»ƒæ”¶æ•›å¹¶æé«˜äº†å†³ç­–çš„é²æ£’æ€§ã€‚

## ðŸ§  æ ¸å¿ƒæž¶æž„

ç³»ç»Ÿé‡‡ç”¨åŒå±‚æŽ§åˆ¶æž¶æž„ï¼Œå°†å¤æ‚çš„ SFC æ˜ å°„é—®é¢˜åˆ†è§£ä¸ºæˆ˜ç•¥å†³ç­–å’Œæˆ˜æœ¯æ‰§è¡Œï¼š

1.  **é«˜å±‚å…ƒæŽ§åˆ¶å™¨ (Meta-Controller)**
      * **ä»»åŠ¡**: æˆ˜ç•¥å†³ç­–ã€‚æ ¹æ®å½“å‰ç½‘ç»œçŠ¶æ€ï¼Œé€‰æ‹©å¤šæ’­æ ‘çš„**ä¸‹ä¸€ä¸ªç›®çš„èŠ‚ç‚¹ (Goal)**ã€‚
      * **ç®—æ³•**: **DAgger (Dataset Aggregation)**ã€‚é€šè¿‡æ¨¡ä»¿ä¸“å®¶ç®—æ³•ï¼ˆMSFC-CEï¼‰çš„å†³ç­–åºåˆ—æ¥å­¦ä¹ æœ€ä¼˜çš„èŠ‚ç‚¹è¿žæŽ¥é¡ºåºã€‚
2.  **ä½Žå±‚æŽ§åˆ¶å™¨ (Low-Level Controller)**
      * **ä»»åŠ¡**: æˆ˜æœ¯æ‰§è¡Œã€‚åœ¨ç»™å®šç›®æ ‡ï¼ˆGoalï¼‰çš„å‰æä¸‹ï¼Œå†³å®šå…·ä½“çš„**è·¯å¾„é€‰æ‹©å’Œèµ„æºåˆ†é… (Action)**ã€‚
      * **ç®—æ³•**: **H-DQN (Hierarchical Deep Q-Network)**ã€‚ä½¿ç”¨å¼ºåŒ–å­¦ä¹ åœ¨ç¦»æ•£åŠ¨ä½œç©ºé—´ä¸­æŽ¢ç´¢ï¼Œä»¥æœ€å°åŒ–å¸¦å®½å’ŒèŠ‚ç‚¹èµ„æºçš„ç»¼åˆæˆæœ¬ã€‚

## ðŸ“‚ æ–‡ä»¶ç»“æž„è¯´æ˜Ž

é¡¹ç›®æ ¸å¿ƒä»£ç ä½äºŽ `HIRL-MSFC-CE (1)/` ç›®å½•ä¸‹ï¼š

```text
.
â”œâ”€â”€ train_hirl_sfc.py         # [ä¸»ç¨‹åº] è®­ç»ƒå…¥å£è„šæœ¬ã€‚è´Ÿè´£åˆå§‹åŒ–çŽ¯å¢ƒã€åè°ƒé«˜ä½Žå±‚ä»£ç†ã€æ‰§è¡Œé¢„è®­ç»ƒå’Œæ··åˆè®­ç»ƒå¾ªçŽ¯ã€‚
â”œâ”€â”€ hirl_sfc_env.py           # [çŽ¯å¢ƒ] è‡ªå®šä¹‰ Gym ä»¿çœŸçŽ¯å¢ƒã€‚å®žçŽ°çŠ¶æ€ç©ºé—´å‘é‡åŒ–ã€åŠ¨ä½œæŽ©ç ã€èµ„æºæ›´æ–°é€»è¾‘ã€‚
â”œâ”€â”€ expert_msfce.py           # [ä¸“å®¶ç³»ç»Ÿ] MSFC-CE å¯å‘å¼ç®—æ³•å®žçŽ°ã€‚ä½œä¸º Oracle æä¾›é«˜è´¨é‡çš„ä¸“å®¶è½¨è¿¹ (State-Goal-Action)ã€‚
â”œâ”€â”€ hirl_sfc_agent.py         # [ä»£ç†] ä½Žå±‚ RL ä»£ç†å®žçŽ°ã€‚åŒ…å« Epsilon-Greedy ç­–ç•¥ã€ç»éªŒå›žæ”¾ (PER) å’Œ Q ç½‘ç»œæ›´æ–°é€»è¾‘ã€‚
â”œâ”€â”€ hirl_sfc_models.py        # [æ¨¡åž‹] å®šä¹‰ç¥žç»ç½‘ç»œç»“æž„ã€‚å«é«˜å±‚ç­–ç•¥ç½‘ç»œ (MLP) å’Œä½Žå±‚ H-DQN ç½‘ç»œ (Keras/TensorFlow)ã€‚
â”œâ”€â”€ hirl_utils.py             # [å·¥å…·] é€šç”¨å·¥å…·åº“ã€‚åŒ…å«ä¼˜å…ˆç»éªŒå›žæ”¾æ±  (Prioritized Replay Buffer) å’Œçº¿æ€§é€€ç«è°ƒåº¦å™¨ã€‚
â”œâ”€â”€ hyperparameters.py        # [é…ç½®] å…¨å±€è¶…å‚æ•°é…ç½®æ–‡ä»¶ã€‚åŒ…æ‹¬æ–‡ä»¶è·¯å¾„ã€ç½‘ç»œå®¹é‡ã€å­¦ä¹ çŽ‡ã€å¥–åŠ±ç³»æ•°ç­‰ã€‚
â”œâ”€â”€ run_thesis_experiments.py # [å®žéªŒ] ç”¨äºŽè¿è¡Œè®ºæ–‡å¯¹æ¯”å®žéªŒçš„æ‰¹å¤„ç†è„šæœ¬ã€‚
â”œâ”€â”€ mat/                      # [æ•°æ®] è¾“å…¥æ•°æ®é›†ç›®å½•
â”‚   â”œâ”€â”€ US_Backbone_path.mat    # ç½‘ç»œæ‹“æ‰‘ä¸Ž K-æœ€çŸ­è·¯å¾„æ•°æ®
â”‚   â”œâ”€â”€ sorted_requests.mat     # é¢„ç”Ÿæˆçš„ä¸šåŠ¡è¯·æ±‚åºåˆ—
â”‚   â””â”€â”€ event_list.mat          # åŠ¨æ€åˆ°è¾¾/ç¦»å¼€äº‹ä»¶åˆ—è¡¨
â””â”€â”€ out_hirl/                 # [è¾“å‡º] è®­ç»ƒç»“æžœä¿å­˜ç›®å½• (æ—¥å¿—ã€æ¨¡åž‹æƒé‡ã€è¯„ä¼°å›¾è¡¨)
```

## ðŸ› ï¸ çŽ¯å¢ƒä¾èµ–

è¯·ç¡®ä¿æ‚¨çš„ Python çŽ¯å¢ƒï¼ˆå»ºè®® Python 3.7+ï¼‰å·²å®‰è£…ä»¥ä¸‹ä¾èµ–åº“ï¼š

```bash
pip install numpy pandas scipy matplotlib tensorflow gym networkx
```

*æ³¨æ„ï¼šæœ¬é¡¹ç›®ä½¿ç”¨ `tensorflow.keras` æž„å»ºç¥žç»ç½‘ç»œæ¨¡åž‹ã€‚*

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1\. æ•°æ®å‡†å¤‡

è¯·ç¡®ä¿ `mat/` ç›®å½•ä¸‹åŒ…å«ä»¥ä¸‹å¿…è¦çš„ `.mat` æ•°æ®æ–‡ä»¶ï¼ˆé€šå¸¸éšé¡¹ç›®æä¾›ï¼‰ï¼š

  * `US_Backbone_path.mat`
  * `sorted_requests.mat`
  * `event_list.mat`

### 2\. é…ç½®å‚æ•°

æ‰“å¼€ `hyperparameters.py`ï¼Œæ ¹æ®æ‚¨çš„è¿è¡ŒçŽ¯å¢ƒè°ƒæ•´è·¯å¾„é…ç½®ï¼š

```python
# hyperparameters.py
from pathlib import Path

# ç¡®ä¿æŒ‡å‘æ­£ç¡®çš„æ•°æ®ç›®å½•
INPUT_DIR = Path('./mat')
# ç»“æžœè¾“å‡ºç›®å½•
OUTPUT_DIR = Path('./out_hirl')

# è®­ç»ƒå‚æ•°è°ƒæ•´
PRE_TRAIN_STEPS = 10000  # é¢„è®­ç»ƒæ­¥æ•°
EPISODE_LIMIT = 5000     # è®­ç»ƒæ€»å›žåˆæ•°
```

### 3\. è¿è¡Œè®­ç»ƒ

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸»è®­ç»ƒè„šæœ¬ï¼š

```bash
python train_hirl_sfc.py
```

ç¨‹åºå°†æŒ‰ä»¥ä¸‹æµç¨‹è¿è¡Œï¼š

1.  **åˆå§‹åŒ–**: åŠ è½½ç½‘ç»œæ‹“æ‰‘å’Œè¯·æ±‚æ•°æ®ã€‚
2.  **é¢„è®­ç»ƒ (Phase 1)**: è°ƒç”¨ `expert_msfce.py` ç”Ÿæˆä¸“å®¶è½¨è¿¹ï¼Œåˆ©ç”¨è¡Œä¸ºå…‹éš† (Behavior Cloning) åˆå§‹åŒ–é«˜å±‚å’Œä½Žå±‚ç½‘ç»œã€‚
3.  **æ··åˆè®­ç»ƒ (Phase 2)**: å¼€å¯ DAgger å’Œ RL æŽ¢ç´¢ã€‚æ¨¡åž‹åœ¨ä¸ŽçŽ¯å¢ƒäº¤äº’çš„è¿‡ç¨‹ä¸­ä¸æ–­ä¼˜åŒ–ï¼Œå¹¶å®šæœŸä¿å­˜æ¨¡åž‹æƒé‡ã€‚

### 4\. æŸ¥çœ‹ç»“æžœ

è®­ç»ƒç»“æŸåŽï¼Œç»“æžœå°†è‡ªåŠ¨ä¿å­˜åœ¨ `out_hirl/` ç›®å½•ä¸­ï¼š

  * `training_metrics.csv`: è®°å½•äº†æ¯å›žåˆçš„å¥–åŠ±ã€æŽ¥å—çŽ‡ã€èµ„æºåˆ©ç”¨çŽ‡ç­‰å…³é”®æŒ‡æ ‡ã€‚
  * `*.png`: è‡ªåŠ¨ç”Ÿæˆçš„è®­ç»ƒè¶‹åŠ¿å›¾ï¼ˆå¥–åŠ±æ›²çº¿ã€é˜»å¡žçŽ‡æ›²çº¿ç­‰ï¼‰ã€‚
  * `sfc_hirl_model_final.weights.h5`: è®­ç»ƒå®Œæˆçš„æœ€ç»ˆæ¨¡åž‹æƒé‡ã€‚

## ðŸ“Š ç®—æ³•é€»è¾‘ç»†èŠ‚

  * **çŠ¶æ€ç©ºé—´ (State)**: åŒ…å«ç‰©ç†ç½‘ç»œèµ„æºè§†å›¾ï¼ˆèŠ‚ç‚¹ CPU/Memã€é“¾è·¯å¸¦å®½ï¼‰ã€VNF éƒ¨ç½²çŠ¶æ€çŸ©é˜µä»¥åŠå½“å‰è¯·æ±‚çš„ç‰¹å¾å‘é‡ã€‚
  * **åŠ¨ä½œç©ºé—´ (Action)**:
      * *High-Level*: ç¦»æ•£ç©ºé—´ï¼Œå¯¹åº”è¯·æ±‚ä¸­å¾…è¿žæŽ¥çš„å€™é€‰ç›®çš„èŠ‚ç‚¹é›†åˆã€‚
      * *Low-Level*: å¤åˆç¦»æ•£ç©ºé—´ï¼Œç¼–ç äº†â€œé€‰æ‹©å“ªæ¡è·¯å¾„åˆ†æ”¯â€ä»¥åŠâ€œä½¿ç”¨ç¬¬ K æ¡æœ€çŸ­è·¯â€ã€‚
  * **å¥–åŠ±å‡½æ•° (Reward)**:
      * å®Œæˆå­ä»»åŠ¡ï¼ˆè¿žæŽ¥ä¸€ä¸ªç›®çš„èŠ‚ç‚¹ï¼‰ï¼š+1.0
      * èµ„æºæ¶ˆè€—æƒ©ç½šï¼šå½’ä¸€åŒ–èµ„æºæˆæœ¬ (Cost)
      * è¯·æ±‚å¤±è´¥æƒ©ç½šï¼š-5.0

## ðŸ“ å¼•ç”¨

å¦‚æžœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬é¡¹ç›®ï¼Œè¯·å‚è€ƒç›¸å…³æ–‡çŒ®ï¼š

> "" (Research on Function Chain Mapping Algorithm of Multicast Service in NFV Scenario)